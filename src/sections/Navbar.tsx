"use client";
import Link from "next/link";
import { TextAlignJustifyIcon, XIcon } from "lucide-react";
import { useEffect, useRef } from "react";
import { NavLink } from "../components";
import gsap from "gsap";

const links = [
  {
    name: "Home",
    href: "#home",
  },
  { name: "Services", href: "#services" },
  { name: "Projects", href: "#projects" },
  { name: "Blog", href: "#blogs" },
];

export default function Navbar() {
  const menuRef = useRef<HTMLUListElement | null>(null);

  const showNavbar = () => {
    document.body.style.overflowY = "hidden";
    gsap.to(menuRef.current, {
      x: "0",
    });
  };

  const hideNavbar = () => {
    document.body.style.overflowY = "auto";
    gsap.to(menuRef.current, {
      x: "100%",
    });
  };

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (!menuRef.current?.contains(event.target as Node)) hideNavbar();
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  return (
    <nav className="w-full flex justify-between items-center px-8 md:px-24 py-4">
      <Link href="/">
        <svg
          width="120"
          viewBox="0 0 736 130"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M204.1 90.2212V17.5613H222.611V77.011H280.583V90.1965L204.1 90.2212Z"
            className="fill-[var(--foreground)]"
          />
          <path
            d="M282.692 62.3176C282.65 58.3912 283.28 54.4796 284.561 50.6979C285.778 47.1679 288.142 43.9793 291.397 41.4764C294.729 38.8997 299.264 36.8889 305.001 35.444C310.738 33.9991 318.128 33.2767 327.17 33.2767C336.186 33.2767 343.575 34.0184 349.339 35.5017C355.103 36.9851 359.614 39.0151 362.872 41.5917C366.083 44.0914 368.42 47.2564 369.639 50.7556C370.916 54.5099 371.545 58.3938 371.508 62.2928C371.546 66.1919 370.917 70.0759 369.639 73.8301C368.42 77.3293 366.083 80.4942 362.872 82.9939C359.601 85.5761 355.09 87.6088 349.339 89.0922C343.589 90.5756 336.199 91.3145 327.17 91.309C318.148 91.309 310.758 90.5701 305.001 89.0922C299.244 87.6143 294.709 85.5816 291.397 82.9939C288.15 80.5088 285.786 77.3405 284.561 73.8301C283.282 70.0846 282.652 66.2086 282.692 62.3176ZM327.17 78.9477C333.793 78.9477 338.904 78.5301 342.502 77.6951C346.101 76.86 348.746 75.7008 350.439 74.2174C352.11 72.7703 353.163 70.9126 353.437 68.9268C354.087 64.5479 354.087 60.1201 353.437 55.7413C353.161 53.756 352.109 51.8988 350.439 50.4507C348.739 48.9673 346.094 47.8081 342.502 46.973C338.911 46.1379 333.8 45.7204 327.17 45.7204C320.623 45.7204 315.546 46.1407 311.907 46.973C308.269 47.8054 305.601 48.9673 303.911 50.4507C302.245 51.9009 301.193 53.757 300.913 55.7413C300.584 57.9283 300.423 60.1303 300.433 62.334C300.421 64.5241 300.581 66.7126 300.913 68.8855C301.2 70.8511 302.252 72.6871 303.911 74.1185C305.617 75.6019 308.283 76.7803 311.907 77.6539C315.546 78.5109 320.623 78.9477 327.17 78.9477Z"
            className="fill-[var(--foreground)]"
          />
          <path
            d="M417.496 117.021C412.484 117.038 407.476 116.79 402.503 116.279C398.269 115.884 394.14 114.923 390.279 113.436C386.898 112.114 384.029 110.042 381.993 107.453C379.994 104.871 378.888 101.53 378.675 97.432H396.506C396.632 99.1765 397.403 100.847 398.715 102.22C399.962 103.398 401.592 104.256 403.413 104.692C405.591 105.223 407.84 105.527 410.109 105.599C412.635 105.714 415.42 105.772 418.465 105.772C427.761 105.772 434.298 104.398 438.076 101.651C441.854 98.9044 443.743 95.0586 443.743 90.1141V82.0215C441.317 84.9902 437.95 87.3532 434.008 88.8532C429.81 90.5014 424.629 91.3255 418.465 91.3255C411.996 91.422 405.539 90.8096 399.265 89.5043C394.477 88.5269 390.017 86.6767 386.211 84.09C382.818 81.6613 380.269 78.5329 378.825 75.025C377.168 70.9138 376.373 66.5996 376.476 62.2681C376.367 57.9343 377.158 53.617 378.815 49.503C380.286 46.0061 382.831 42.883 386.201 40.438C389.987 37.827 394.455 35.9739 399.255 35.0238C405.537 33.7604 411.99 33.1677 418.455 33.2602C424.619 33.2602 429.776 34.0568 433.928 35.6501C437.896 37.1158 441.303 39.4465 443.783 42.3911V34.5293H461.044V91.2431C461.178 95.2021 460.149 99.129 458.046 102.69C456.02 105.915 453.052 108.673 449.41 110.716C445.256 112.991 440.616 114.596 435.737 115.447C429.748 116.538 423.629 117.066 417.496 117.021ZM443.783 54.3899C443.783 51.3462 441.527 49.1487 437.016 47.7971C432.505 46.4456 426.471 45.7616 418.915 45.7452C414.599 45.6588 410.286 46.0047 406.071 46.7753C403.311 47.2638 400.745 48.3213 398.615 49.8491C396.839 51.2476 395.614 53.0534 395.097 55.0326C394.456 57.4436 394.154 59.9074 394.197 62.3753C394.154 64.8432 394.456 67.307 395.097 69.7179C395.614 71.6972 396.839 73.503 398.615 74.9014C400.745 76.4292 403.311 77.4868 406.071 77.9753C410.286 78.7458 414.599 79.0917 418.915 79.0054C422.19 79.0161 425.463 78.8813 428.72 78.6016C431.389 78.3974 434.027 77.9779 436.596 77.349C438.516 76.8901 440.288 76.085 441.784 74.9921C442.411 74.554 442.914 74.0086 443.259 73.3937C443.605 72.7789 443.783 72.1095 443.783 71.432V54.3899Z"
            className="fill-[var(--foreground)]"
          />
          <path
            d="M497.886 91.3585C493.936 91.3561 489.99 91.147 486.072 90.7322C482.435 90.381 478.904 89.4933 475.647 88.1116C472.619 86.7892 470.104 84.7899 468.391 82.3429C466.598 79.8377 465.885 76.4974 466.252 72.322C466.532 68.9872 467.615 66.3694 469.5 64.4685C471.516 62.4908 474.14 60.9965 477.097 60.142C480.698 59.0814 484.464 58.4461 488.281 58.2548C492.572 57.9911 497.293 57.8593 502.444 57.8593L531.43 57.9746V54.1014C531.455 52.7543 531.247 51.4112 530.81 50.1128C530.318 48.9072 529.275 47.9077 527.902 47.3274C525.785 46.456 523.491 45.914 521.135 45.7287C517.078 45.3411 512.995 45.1704 508.911 45.2177C506.007 45.1967 503.104 45.3122 500.215 45.5639C498.175 45.715 496.174 46.1178 494.278 46.7588C492.84 47.2478 491.56 48.0068 490.54 48.9756C489.584 49.9457 488.879 51.0678 488.471 52.2719H469.85C470.128 49.3387 471.149 46.4862 472.849 43.8992C474.547 41.4322 476.997 39.3729 479.955 37.9246C483.603 36.1806 487.601 34.9915 491.759 34.4139C497.368 33.6009 503.057 33.2202 508.751 33.2767C515.432 33.1612 522.11 33.6085 528.681 34.6117C533.839 35.5265 537.897 36.8285 540.835 38.5426C543.601 40.0594 545.725 42.2484 546.913 44.8057C548.056 47.4494 548.618 50.2401 548.572 53.0466V90.1718H531.45V81.2222C530.239 82.6843 528.77 83.9897 527.092 85.0954C525.054 86.4297 522.8 87.5225 520.396 88.3423C517.335 89.3834 514.139 90.1273 510.87 90.5591C506.577 91.128 502.234 91.3954 497.886 91.3585ZM508.751 67.7813C502.741 67.6915 496.73 67.9393 490.76 68.523C486.762 69.0174 484.763 70.4843 484.763 72.9071C484.653 74.1501 485.102 75.3829 486.023 76.3707C486.945 77.3585 488.275 78.0323 489.76 78.2637C493.092 79.0219 498.02 79.4009 504.543 79.4009C509.053 79.4796 513.561 79.2037 518.007 78.5769C520.856 78.173 523.624 77.4464 526.233 76.4177C527.915 75.7865 529.349 74.7786 530.371 73.5087C531.048 72.6196 531.431 71.5994 531.48 70.5502V67.7813H508.751Z"
            className="fill-[var(--foreground)]"
          />
          <path
            d="M574.399 90.2212H549.731L587.383 53.8954L549.731 17.5613H574.309L599.707 42.0285L624.984 17.5448H649.572L611.971 53.8954L649.812 90.2212H625.094L599.707 65.7375L574.399 90.2212Z"
            fill="#89E101"
          />
          <path
            d="M651.471 90.2212V17.5613H705.445C709.885 17.5126 714.317 17.8943 718.648 18.6986C722.16 19.3361 725.431 20.665 728.184 22.5718C730.853 24.569 732.85 27.1012 733.981 29.9227C735.443 33.6911 736.119 37.6368 735.98 41.5918C736.096 45.4306 735.444 49.2589 734.051 52.923C732.916 55.7761 730.893 58.3336 728.184 60.3398C725.311 62.3434 721.903 63.7557 718.239 64.4602C713.654 65.3462 708.954 65.7669 704.246 65.7128H669.982L669.672 90.2212H651.471ZM669.982 53.4339H704.785C706.593 53.4511 708.397 53.3186 710.173 53.0384C711.676 52.7972 713.064 52.2051 714.171 51.3325C715.384 50.3001 716.243 49.0203 716.659 47.6241C717.276 45.5766 717.555 43.47 717.489 41.361C717.565 39.5158 717.188 37.6769 716.38 35.955C715.751 34.6789 714.757 33.5477 713.481 32.6586C712.296 31.8664 710.897 31.3208 709.403 31.0682C707.882 30.8014 706.331 30.666 704.775 30.6643H669.982V53.4339Z"
            fill="#89E101"
          />
          <path
            d="M134.574 19.0447C121.678 8.41771 104.712 1.80618 86.566 0.33656C68.4204 -1.13306 50.2181 2.63014 35.0604 10.985C19.9026 19.3399 8.72732 31.7695 3.43846 46.1561C-1.85039 60.5427 -0.925572 75.9962 6.05535 89.8836C13.0363 103.771 25.6414 115.233 41.7231 122.317C57.8047 129.401 76.368 131.669 94.25 128.733C112.132 125.798 128.226 117.842 139.791 106.219C151.356 94.5974 157.675 80.0288 157.673 64.9959C157.682 56.4598 155.647 48.0062 151.683 40.1206C147.719 32.235 141.905 25.0726 134.574 19.0447ZM64.4385 42.49L73.574 34.9661C74.2647 34.3957 75.085 33.9432 75.988 33.6345C76.891 33.3258 77.8589 33.1669 78.8364 33.1669C79.814 33.1669 80.7819 33.3258 81.6849 33.6345C82.5879 33.9432 83.4082 34.3957 84.0989 34.9661L93.2244 42.49C93.9177 43.0596 94.4677 43.7364 94.8431 44.4817C95.2184 45.227 95.4116 46.026 95.4116 46.8329C95.4116 47.6399 95.2184 48.4389 94.8431 49.1842C94.4677 49.9294 93.9177 50.6063 93.2244 51.1759L84.0989 58.6916C83.4082 59.2619 82.5879 59.7144 81.6849 60.0231C80.7819 60.3319 79.814 60.4908 78.8364 60.4908C77.8589 60.4908 76.891 60.3319 75.988 60.0231C75.085 59.7144 74.2647 59.2619 73.574 58.6916L64.4385 51.1759C63.7464 50.6057 63.1974 49.9287 62.8228 49.1835C62.4482 48.4383 62.2554 47.6396 62.2554 46.8329C62.2554 46.0263 62.4482 45.2275 62.8228 44.4824C63.1974 43.7372 63.7464 43.0602 64.4385 42.49ZM126.458 61.8066L87.4772 93.9461C85.1739 95.8428 82.0518 96.9081 78.7965 96.9081C75.5412 96.9081 72.419 95.8428 70.1157 93.9461L31.1348 61.8066C29.897 60.7825 29.2019 59.3957 29.2019 57.9499C29.2019 56.5041 29.897 55.1173 31.1348 54.0932L35.8625 50.2035C36.4812 49.6899 37.217 49.2824 38.0275 49.0043C38.838 48.7262 39.7072 48.583 40.5851 48.583C41.4631 48.583 42.3323 48.7262 43.1428 49.0043C43.9533 49.2824 44.6891 49.6899 45.3078 50.2035L78.5216 77.4643L111.945 49.9315C113.215 48.8908 114.933 48.3067 116.723 48.3067C118.513 48.3067 120.231 48.8908 121.501 49.9315L126.498 54.052C127.118 54.5609 127.61 55.1663 127.944 55.8331C128.278 56.4999 128.448 57.2147 128.444 57.9362C128.441 58.6576 128.263 59.3713 127.922 60.0357C127.581 60.7001 127.084 61.3021 126.458 61.8066Z"
            fill="#89E101"
          />
        </svg>
      </Link>
      <TextAlignJustifyIcon className="cursor-pointer" onClick={showNavbar} />
      <ul
        ref={menuRef}
        className="z-120  flex-col overflow-hidden gap-8 translate-x-full md:w-2xl w-full px-8 pt-18 fixed h-full right-0 top-0 bg-[var(--background)]"
      >
        <XIcon
          onClick={hideNavbar}
          className="top-8 right-8 cursor-pointer absolute"
        />
        {links.map((link, index) => (
          <NavLink
            onClick={hideNavbar}
            key={index}
            title={link.name}
            link={link.href}
          />
        ))}
      </ul>
    </nav>
  );
}
